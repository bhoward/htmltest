<!DOCTYPE html>
<html>
  <head>
    <title>Putt Putnam County, Virtually!</title>
    <script src="golf.js"></script>
    <style>
    html, body {
      margin: 0 !important;
      padding: 0 !important;
    }
    </style>
  </head>
  <body>
    <canvas id="GolfCanvas"></canvas><br />
    <input type="text" id="vx" value="10" />
    <input type="text" id="vy" value="10" />
    <button type="button" id="HitButton">Hit</button>
    <select id="holeSelect">
    </select>

    <script>
      const holeSelect = document.getElementById("holeSelect");
      course.map((hole, i) => {
        const holeOpt = document.createElement("option");
        holeOpt.value = i;
        holeOpt.appendChild(document.createTextNode(hole.name));
        holeSelect.append(holeOpt);
      });

      const canvas = document.getElementById("GolfCanvas");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight - 25;

      let state = new State(hole1);

      holeSelect.onchange = (event) => {
        const index = +event.target.value;
        if (index >= 0) {
          state = new State(course[index]);
        }
      };

      const hitButton = document.getElementById("HitButton");
      hitButton.onclick = (event) => {
        const vx = +document.getElementById("vx").value;
        const vy = +document.getElementById("vy").value;
        state.hit([vx, vy]);
      };

      state.render(canvas);

      const id = setInterval(() => {
        state.step();
        state.render(canvas);
        // if (state.done) clearInterval(id);
      }, 16);
    </script>
  </body>
</html>